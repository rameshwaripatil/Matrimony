if(!iBeatHeadline){var host_tests,domain_host_mapping;!function(){var e,t,i,n=0,a=[];for(t=0;t<256;t++)a[t]=(t+256).toString(16).substr(1);function o(){var t=(16,(!e||n+16>r.BUFFER_SIZE)&&(n=0,e=r.randomBytes(r.BUFFER_SIZE)),e.slice(n,n+=16));return t[6]=15&t[6]|64,t[8]=63&t[8]|128,t}function r(){var e=o();return a[e[0]]+a[e[1]]+a[e[2]]+a[e[3]]+"-"+a[e[4]]+a[e[5]]+"-"+a[e[6]]+a[e[7]]+"-"+a[e[8]]+a[e[9]]+"-"+a[e[10]]+a[e[11]]+a[e[12]]+a[e[13]]+a[e[14]]+a[e[15]]}r.BUFFER_SIZE=4096,r.bin=o,r.clearBuffer=function(){e=null,n=0},r.test=function(e){return"string"==typeof e&&/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/.test(e)},"undefined"!=typeof crypto?i=crypto:"undefined"!=typeof window&&void 0!==window.msCrypto&&(i=window.msCrypto),"undefined"!=typeof module&&"function"==typeof require?(i=i||require("crypto"),module.exports=r):"undefined"!=typeof window&&(window.uuid=r),r.randomBytes=function(){if(i){if(i.randomBytes)return i.randomBytes;if(i.getRandomValues)return function(e){var t=new Uint8Array(e);return i.getRandomValues(t),t}}return function(e){var t,i=[];for(t=0;t<e;t++)i.push(Math.floor(256*Math.random()));return i}}()}();var iBeatHeadline={flickerControl:!1,effectiveTestIds:[],effectiveHids:[],isHudLoaded:!1,headlineTag:"body",test_details:[],S3_base_domain:"https://agi-static.indiatimes.com/cms-common/",isTestLoaded:!1,scriptError:!1,curr_path:window.location?window.location.pathname:"",noOfTimesExecuted:0,loadTestProperties:function(){null!=window._ibeat_headline_ctrl&&(this.flickerControl=null!=window._ibeat_headline_ctrl.flickerControl&&window._ibeat_headline_ctrl.flickerControl,this.headlineTag=null!=window._ibeat_headline_ctrl.headlineTag?window._ibeat_headline_ctrl.headlineTag:"body"),"true"===localStorage.getItem("ibeat_hud")&&(this.isHudLoaded=!0)},hideContentForFlicker:function(e){var t=e+" { visibility: hidden; }",i=document.head||document.querySelector("head"),n=document.createElement("style");n.id="ibeat-flicker-control-style",i.appendChild(n),n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),window.setTimeout((function(){iBeatHeadline.removeFlickerControl()}),1e4)},removeFlickerControl:function(){var e=document.getElementById("ibeat-flicker-control-style");e&&e.parentNode.removeChild(e)},readDomainHostMapping:async function(){try{if(null!=domain_host_mapping)return domain_host_mapping;let e=this.S3_base_domain+"ibeat_domain_host_mapping.json",t=await fetch(e);return domain_host_mapping=await t.json()}catch(e){return console.error("Error - ",e),{}}},readRunningTestsForHost:async function(e){if(null!=host_tests)return host_tests;let t=this.S3_base_domain+"ibeat_"+e+".json";try{let e=await fetch(t);return host_tests=await e.json()}catch(e){return console.error("Error - ",e),{}}},loadTestMetaData:async function(){if(this.loadTestProperties(),this.isHudLoaded)this.test_details={};else{this.flickerControl&&this.hideContentForFlicker(this.headlineTag);let e=window.location.hostname,t=(domain_host_mapping=await this.readDomainHostMapping())[e];if(void 0===t)return;let i=await this.readRunningTestsForHost(t);this.test_details=i[window.location.pathname],HeadlineTimer=setInterval((()=>{iBeatHeadline.initiate()}),1e3)}},executeHeadlineTest:function(){for(let e in this.test_details){if(headline_test=this.test_details[e],originalHeadline=headline_test.originalHeadline,headings=headline_test.headlines,url=headline_test.url,position=headline_test.position,isWinnerFound=headline_test.isWinnerFound,probability=1+Math.floor(100*Math.random()),heading="",isWinnerFound){heading_id=headline_test.winner;for(let e in headings)if(heading_id===headings[e].ID){heading=headings[e].title;break}}else if(probability<=20)probability=1+Math.floor(100*Math.random()),indx=Math.floor(probability/(100/headings.length)),heading=headings[indx].title,heading_id=headings[indx].ID;else{distribution=headline_test.distribution,distribution=Object.entries(distribution).sort(((e,t)=>e[1]>t[1])),probability=1+Math.floor(100*Math.random());let e=0;distribution.forEach((function(t){if(t[1]+e>probability){heading_id=t[0];for(let e in headings)if(heading_id===headings[e].ID){heading=headings[e].title;break}}else e=t[1]}))}""!==heading&&(url_obj=new URL(url),pathname=url_obj.pathname,this.replaceHeading(pathname,position,originalHeadline,e,heading,heading_id)&&(this.effectiveTestIds.push(e),this.effectiveHids.push(heading_id)))}this.flickerControl&&this.removeFlickerControl()},replaceHeading:function(e,t,i,n,a,o){let r=document.getElementsByTagName("a");for(let d=0;d<r.length;d++)if(aTag=r[d],e==aTag.pathname&&(headlineElement=this.getLeaf(aTag),null!=headlineElement&&(position=this.getXPath(headlineElement.parentNode,aTag),position===t&&headlineElement.textContent.trim()===i.trim()&&aTag.href.indexOf("ibeatAbH")<0)))return headlineElement.innerText=a,url_obj=new URL(aTag.href),param=new URLSearchParams(url_obj.search),param.set("ibeatAbH",o),param.set("ibeatTid",n),aTag.href=url_obj.origin+url_obj.pathname+"?"+param.toString(),console.log("Headline Replaced: "+a),clearInterval(HeadlineTimer),aTag.onclick=function(){localStorage.setItem("ibeat_HID",o),localStorage.setItem("ibeat_TID",n)},!0;return!1},getLeaf:function(e){if(e&&e.textContent&&""!=e.textContent){if(e.hasChildNodes())for(let i=0;i<e.childNodes.length;i++){if(childNode=e.childNodes[i],childNode&&""!=childNode.textContent.trim()&&3==childNode.nodeType)return childNode;if((-1!==e.innerText.indexOf("\n")||-1!==e.innerText.indexOf("\t")||e.textContent.trim()==childNode.textContent.trim())&&(!childNode.textContent.trim().match("^([0-9]{1,2})(:)([0-9]{1,2})$")&&!childNode.textContent.trim().match("^[0-9]+$"))){if(["B"].includes(childNode.tagName))return e;var t=this.getLeaf(childNode);if(null!=t)return t}}return""!=e.textContent?e:void 0}},getXPath:function(e,t){if(!e)return null;if(null!=t&&t===e)return"";if(e.id)return`//*[@id=${e.id}]`;if("BODY"===e.tagName)return"/html/body";{const i=Array.from(e.parentNode.childNodes).filter((t=>t.nodeName===e.nodeName)),n=i.indexOf(e);return this.getXPath(e.parentNode,t)+"/"+e.tagName.toLowerCase()+(i.length>1?`[${n+1}]`:"")}},runHeadlineTest:async function(){null==this.test_details||this.isHudLoaded?clearInterval(HeadlineTimer):this.executeHeadlineTest()},initiate:async function(){try{iBeatHeadline.noOfTimesExecuted=iBeatHeadline.noOfTimesExecuted+1,iBeatHeadline.noOfTimesExecuted>10&&clearInterval(HeadlineTimer),await iBeatHeadline.runHeadlineTest()}catch(e){console.log("ERROR"+e)}}};try{iBeatHeadline.loadTestMetaData()}catch(t){iBeatHeadline.scriptError=!0}async function retriggerHeadlineTesting(){iBeatHeadline.curr_path!=window.location.pathname&&"complete"===document.readyState&&(console.log("retriggered"),iBeatHeadline.curr_path=window.location.pathname,await iBeatHeadline.loadTestMetaData(),iBeatHeadline.initiate())}const e=new MutationObserver(((e,t)=>{retriggerHeadlineTesting()}));var container=document.body,config={attributes:!0};e.observe(container,config)}